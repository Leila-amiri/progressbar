let width,bar,barTxt,limit;const btn=document.getElementsByTagName("button");var xmlhttp=new XMLHttpRequest;let url="http://pb-api.herokuapp.com/bars";xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);myFunction(t)}},xmlhttp.open("GET",url,!0),xmlhttp.send();const myFunction=t=>{let e,r,n;for(limit=Number(t.limit),e=0;e<t.buttons.length;e++)btn[e].textContent=t.buttons[e],btn[e].style.display="inline-block";for(e=0;e<t.bars.length;e++)(bar=document.querySelector("#bar"+(e+1))).children[0].innerHTML=t.bars[e]+"%",bar.style.width=t.bars[e]/(limit/100)+"%",bar.parentNode.style.display="block",n=document.querySelector("#selectBar"),(r=document.createElement("option")).text="#progress"+(e+1),r.value="bar"+(e+1),n.add(r);bar=document.querySelector("#bar1"),barTxt=bar.children[0],width=t.bars[0],document.querySelector("#current").children[0].innerHTML=" "+limit},move=t=>{let e=Number(btn[t].textContent);switch(width+=e,!0){case width>0&&width<limit:barTxt.innerHTML=width+"%",bar.style.width=width/(limit/100)+"%",bar.style.backgroundColor="#a7dbf6";break;case width>=limit:barTxt.innerHTML=width+"%",bar.style.width="100%",bar.style.backgroundColor="#ed4040";break;default:bar.style.width=0,barTxt.innerHTML="0%",width=0}},selectBar=document.querySelector("#selectBar");selectBar.addEventListener("change",function(){bar=document.getElementById(selectBar.value),barTxt=bar.children[0],width=Number(barTxt.textContent.slice(0,-1))},!1);